!function(t){t.fn.timedDialog=function(i){this.defaults={type:"info",title:"Info",body:"This is the default body text. You might replace this with your own.",width:320,height:240,appendTo:"body",closeOnEscape:!0,closeOnTimer:!1,timeout:10,timeoutAnimation:!0,isModal:!0,btnDismiss:{text:"Dismiss",class:""},btnConfirm:{text:"Confirm",action:()=>{},class:""}};let n=t.extend({},this.defaults,i);const e=!!HTMLElement.prototype.attachShadow;console.log("Support for shadowDom: ",e);const o=document.body,s=document.documentElement;var l=Math.max(o.scrollHeight,o.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight),a=Math.max(o.scrollWidth,o.offsetWidth,s.clientWidth,s.scrollWidth,s.offsetWidth);n.icon={info:{icon:{src:"i"},style:"info"},confirmation:{icon:{src:"?"},style:"info"}}[n.type].icon.src;const c={position:"absolute",top:0,left:0,width:a+"px",height:l+"px","z-index":"2000"},d={position:"absolute",width:n.width+"px",height:n.height+"px","line-height":"20px","z-index":"2001"},h=function(t){var i="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let e=0;e<t;e++)i+=n.charAt(Math.floor(Math.random()*n.length));return i}(5),r="timed-dialog-"+h,m=t(`<div id="overlay-${r}" class="timed-dialog-overlay"></div>`),p=t(`\n                    <div id="${r}" class="timed-dialog">\n                        <div class="header">\n                            <!--<div class="icon">${n.icon}</div>-->\n                            <h1 class="title">${n.title}</h1>\n                        </div>\n                        <div class="body">${n.body}</div>\n                        <div class="action"> </div>\n                    </div>\n            `),f=t(`<button style="display:none" \n            class="btn btn-primary" \n            style="position:relative;" \n            id="btn-dismiss-${h}">\n                <span class="text">${n.btnDismiss.text}</span>\n            </button>\n        `),u=t(`<button \n            class="btn btn-primary" \n            id="btn-confirm-${h}">\n                ${n.btnConfirm.text}\n            </button>\n        `),b=t(`<button id="btn-close-${h}" class="btn btn-close">x</button>`);if(this.length>1)return this.each(function(){t(this).timedDialog(i)}),this;function g(){t(p).fadeOut(),t(m).fadeOut(500,()=>{t(m).remove()})}function v(){t(m).css({width:a+"px",height:l+"px"}),t(p).css({left:t(document).scrollLeft()+(t(window).width()-n.width)/2+"px",top:t(document).scrollTop()+(t(window).height()-n.height)/2+"px"})}return t(window).resize(()=>{v()}),t(document).scroll(()=>{v()}),this.random=h,this.initialize=(()=>{if(!t(".timed-dialog-overlay").length)return t("body").append(m),n.isModal&&m.css(c),t(p).appendTo(m),t(p).css(d),t(window).resize(),t(b).appendTo(p.children("div.header")),t(f).appendTo(p.children(".action")),"confirmation"==n.type&&t(u).appendTo(p.children(".action")),t(f).click(()=>{g()}),t(f).on("mouseenter",()=>{t("span.meter").addClass("hover")}),t(f).on("mouseleave",()=>{t("span.meter").removeClass("hover")}),t(b).click(()=>{g()}),t(u).click(()=>{if("function"!=typeof n.btnConfirm.action)throw new Error("Confirmation button action must be a callback");try{n.btnConfirm.action()}catch(t){console.log("")}g()}),t(m).click(t=>{p.not(t.target)&&0===p.has(t.target).length&&g()}),t(p).hide().fadeIn(300,()=>{n.closeOnTimer&&(function(i){let n=t(f).children("span.text").html();t(f).children("span.text").html(n+` (${i})`);let e=setInterval(()=>{i--,t(f).children("span.text").html(n+` (${i})`),i<1&&(clearInterval(e),t(f).click())},1e3)}(n.timeout),n.timeoutAnimation&&function(){let i=t(f).width(),e=t('<span class="meter"></span>');t(e).appendTo(f);let o=1e3*n.timeout/i,s=i,l=setInterval(()=>{t(e).width(s),--s<1&&clearInterval(l)},o)}())}),this}),this.initialize()}}(jQuery);